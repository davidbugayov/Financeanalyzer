# Организация строковых ресурсов в проекте

## Обзор

Данный документ описывает лучшие практики организации строковых ресурсов в проекте Finance Analyzer.

## Структура файлов строк

Строковые ресурсы организованы в модуле `ui` в нескольких файлах по функциональности:

### Основные файлы

1. **`strings.xml`** - основные строки приложения
   - Название приложения
   - Навигация
   - Общие действия (добавить, редактировать, удалить и т.д.)
   - Состояния загрузки и ошибок
   - Транзакции
   - Категории
   - Бюджет
   - Кошельки

2. **`strings_dialogs.xml`** - строки для диалогов
   - Заголовки диалогов
   - Кнопки (подтвердить, отмена, применить, закрыть)
   - Сообщения подтверждения
   - Периоды времени
   - Выбор категорий

3. **`strings_achievements.xml`** - строки для достижений
   - Общие строки достижений
   - Фильтры
   - Категории достижений
   - Редкость достижений

4. **`strings_libraries.xml`** - строки для библиотек
   - Названия библиотек
   - Описания библиотек
   - Форматы версий и лицензий

5. **`strings_errors.xml`** - строки для ошибок
   - Общие ошибки
   - Ошибки профиля
   - Ошибки истории транзакций
   - Ошибки аналитики
   - Ошибки достижений
   - Ошибки кошельков
   - Ошибки валидации

### Модульные файлы

- **`data/strings.xml`** - строки для модуля данных
  - Значения по умолчанию
  - Логирование
  - Ошибки миграции базы данных

## Принципы организации

### 1. Группировка по функциональности

Строки группируются по функциональным областям приложения:
- Диалоги
- Достижения
- Библиотеки
- Ошибки
- Основной функционал

### 2. Использование префиксов

Для избежания конфликтов имен используются префиксы:
- `dialog_` - для диалогов
- `achievements_` - для достижений
- `library_` - для библиотек
- `error_` - для ошибок
- `period_` - для периодов времени

### 3. Форматированные строки

Для строк с динамическими значениями используются плейсхолдеры:
```xml
<string name="dialog_delete_category_message_default">Вы уверены, что хотите удалить категорию \"%1$s\"? Все транзакции в этой категории будут перемещены в категорию \"Другое\".</string>
```

### 4. Множественное число

Для строк с множественным числом используется `plurals`:
```xml
<plurals name="transactions_count">
    <item quantity="one">%1$d транзакция</item>
    <item quantity="few">%1$d транзакции</item>
    <item quantity="other">%1$d транзакций</item>
</plurals>
```

## Использование в коде

### В Compose UI

```kotlin
import androidx.compose.ui.res.stringResource
import com.davidbugayov.financeanalyzer.ui.R as UiR

Text(text = stringResource(UiR.string.dialog_delete_title))
```

### В ViewModel'ях

Для ViewModel'ей используется `StringResourceProvider`:

```kotlin
import com.davidbugayov.financeanalyzer.ui.util.StringResourceProvider

val errorMessage = StringResourceProvider.errorUnknown
```

### Инициализация

`StringResourceProvider` должен быть инициализирован в Application классе:

```kotlin
class FinanceAnalyzerApplication : Application() {
    override fun onCreate() {
        super.onCreate()
        StringResourceProvider.init(this)
    }
}
```

## Локализация

### Поддержка языков

Для поддержки других языков создаются файлы в соответствующих папках:
- `values-ru/strings.xml` - русский язык
- `values-en/strings.xml` - английский язык

### Форматы дат и чисел

Используются локализованные форматы:
```kotlin
val dateFormat = SimpleDateFormat("dd.MM.yyyy", Locale.getDefault())
```

## Лучшие практики

### 1. Избегайте хардкода

❌ Плохо:
```kotlin
Text("Удалить")
```

✅ Хорошо:
```kotlin
Text(stringResource(UiR.string.dialog_delete_title))
```

### 2. Используйте описательные имена

❌ Плохо:
```xml
<string name="delete">Удалить</string>
```

✅ Хорошо:
```xml
<string name="dialog_delete_title">Удалить</string>
```

### 3. Группируйте связанные строки

```xml
<!-- Диалоги подтверждения -->
<string name="dialog_delete_title">Удалить</string>
<string name="dialog_cancel">Отмена</string>
<string name="dialog_confirm">Подтвердить</string>
```

### 4. Используйте комментарии для группировки

```xml
<!-- Диалоги подтверждения -->
<string name="dialog_delete_title">Удалить</string>

<!-- Диалог удаления категории -->
<string name="dialog_delete_category_message_default">Вы уверены, что хотите удалить категорию \"%1$s\"?</string>
```

### 5. Проверяйте уникальность имен

Убедитесь, что имена строк уникальны во всех файлах ресурсов.

## Миграция существующего кода

### Пошаговый процесс

1. **Создайте новые файлы строк** по функциональности
2. **Добавьте строки** в соответствующие файлы
3. **Обновите импорты** в коде
4. **Замените хардкод** на ресурсы
5. **Протестируйте** изменения

### Пример миграции

**До:**
```kotlin
AlertDialog(
    title = { Text("Удалить") },
    text = { Text("Вы уверены?") },
    confirmButton = {
        TextButton(onClick = onConfirm) {
            Text("Удалить")
        }
    }
)
```

**После:**
```kotlin
AlertDialog(
    title = { Text(stringResource(UiR.string.dialog_delete_title)) },
    text = { Text(stringResource(UiR.string.dialog_delete_message)) },
    confirmButton = {
        TextButton(onClick = onConfirm) {
            Text(stringResource(UiR.string.dialog_delete_title))
        }
    }
)
```

## Мониторинг и поддержка

### Регулярные проверки

1. **Поиск хардкода** - регулярно ищите строки в кавычках
2. **Проверка уникальности** - убедитесь, что имена строк уникальны
3. **Тестирование локализации** - проверяйте работу с разными языками

### Инструменты

- **Android Studio Lint** - автоматически находит хардкод строк
- **Grep поиск** - для поиска строк в кавычках
- **Resource Manager** - для управления ресурсами

## Заключение

Правильная организация строковых ресурсов обеспечивает:
- Легкость локализации
- Поддержку кода
- Консистентность интерфейса
- Уменьшение дублирования

Следуйте этим принципам для создания качественного и поддерживаемого кода. 